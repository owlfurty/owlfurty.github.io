function mailSuccess(){$("#errors").hide(),$(".formInputs").addClass("collapse"),$("#success, form button").addClass("messageSent"),setTimeout(function(){$("form button").addClass("checked")},400)}function mailError(){var e=$("#errors"),t=$("#success");e.show(),t.hide()}$(document).ready(function(){"use strict";function e(){var e=$("nav"),t=$(".workPage"),n=t.scrollTop(),a=$(".aboutPage .containerInner").scrollTop();if(T===n&&q===a)return!1;if(T=n,q=a,n>=0&&t.hasClass("activePage")&&!t.hasClass("noScroll")){var o=.66*n,i=(n-.4*x)/(x*-.4),s=(n-x)/x*x*-.33+x*-.33+64;$(".introText").css({transform:"translateY("+o+"px)",opacity:i}),b>k&&(s>0?e.css("transform","translateY("+s+"px)").removeClass("withBackground"):e.css("transform","translateY(0px)").addClass("withBackground"))}$(".aboutPage").hasClass("activePage")&&a>=0&&x>=a&&$(".aboutPageBannerImage").css("transform","translateY("+a/3+"px)")}function t(e){var t=e.position(),n=t.left+parseInt(e.css("paddingLeft")),a=e.width();S.velocity({left:n,width:a},{queue:!1,duration:250,easing:[.4,0,.2,1]})}function n(){$(window).load(function(){var e=E.eq(0).width(),t=E.eq(0).position().left+parseInt(E.eq(0).css("paddingLeft"));S.css({width:e,left:t})})}function a(){var e=$("nav");e.velocity({translateY:["0px",e.position().top]},{queue:!1,duration:600,easing:[.4,0,.2,1]}),setTimeout(function(){e.addClass("withBackground")},350)}function o(){var e=$(".workPage").scrollTop(),t=(e-x)/x*x*-.33+x*-.33+64;t>0&&$("nav").removeClass("withBackground").velocity({translateY:[t+"px","0px"]},{queue:!1,duration:600,easing:[.4,0,.2,1]})}function i(){var e=$(".workThumbnail.expandedWork"),t=$(".workThumbnail"),n=$(".expandedWork"),a=$(".descriptionTitle, .descriptionBody"),o=0,i=0,s=0,r=0;if(e.hasClass("small")?(o=t.filter(".small").not(n).width(),i=o):e.hasClass("medium")?(o=t.filter(".medium").not(n).width(),i=t.filter(".medium").not(n).outerHeight()):e.hasClass("large")&&(o=t.filter(".medium").not(n).width(),i=o),e.hasClass("columnOne")?s=t.filter(".columnOne").not(n).position().left:e.hasClass("columnTwo")?s=t.filter(".columnTwo").not(n).position().left:e.hasClass("columnThree")&&(s=t.filter(".columnThree").not(n).position().left),b>C)e.hasClass("rowOne")?r=t.filter(".rowOne").not(n).position().top:e.hasClass("rowTwo")?r=t.filter(".rowTwo").not(n).position().top:e.hasClass("rowThree")?r=t.filter(".rowTwo").not(n).position().top+i:e.hasClass("rowFour")?r=t.filter(".rowFour").not(n).position().top:e.hasClass("rowFive")&&(r=t.filter(".rowFive").not(n).position().top);else{var l=e.attr("data-pos");r=l+"00vw"}e.off(),e.removeClass("cursor"),e.removeClass("expandedWorkFinish").velocity({left:s,top:r,width:o,height:i},{queue:!1,duration:600,easing:[.23,1,.32,1],begin:function(){e.find(".thumbnailImageContainer, a").removeAttr("style"),C>b&&e.velocity({translateY:0},{queue:!1,duration:600,easing:[.23,1,.32,1]}),e.find(a).removeClass("fadeIn"),e.find("a").velocity("scroll",{container:e,mobileHA:!1,duration:0,easing:[.23,1,.32,1]})},complete:function(){e.removeAttr("style").removeClass("expandedWork invisiblePadding"),$(".workPage").removeClass("noScroll")}})}function s(e,t){e.load(t+" section > *")}function r(e){var t=e.attr("href"),n=e.parent().index(),o=e.prev(".workDescription"),r=$(".workThumbnail").eq(n),l=r.position(),u=r.width(),c=$(".workPage").scrollTop()-(.65*x+128),d=$(".workThumbnailContainer").width(),h=d/u,f=r.css("paddingBottom"),p=384;return k>=b&&(p=240),_gaq.push(["_trackPageview",t]),r.hasClass("expandedWork")?!1:(s(o,t),$(".workPage").addClass("noScroll"),r.css({left:l.left+"px",top:l.top+"px"}),$("nav").hasClass("withBackground")||a(),void r.addClass("expandedWork expandedWorkFinish").velocity({translateX:[-l.left,0],translateY:[c-l.top,0],scale:h,paddingBottom:[x/d*100/h+"%",f]},{queue:!1,duration:800,easing:[.23,1,.32,1]}).velocity({scale:1,width:"100%",height:"100vh",paddingBottom:"0px"},{delay:800,queue:!1,duration:0,complete:function(){r.find("a").velocity({height:p},{queue:!1,duration:600,easing:[.23,1,.32,1],begin:function(){r.find(".descriptionTitle, .descriptionBody").addClass("fadeIn")},complete:function(){r.css({transform:"",left:"0px",top:c+"px"}).addClass("invisiblePadding").on("click",function(e){var t=$(this),n=e.pageX,a=t.width(),o=parseInt(t.css("padding-left")),s=a+o;$(".workThumbnail").hasClass("expandedWorkFinish")&&b>k&&(o>n||n>s)&&(i(),history.back())}).on("mouseover",function(e){var t=$(this),n=e.pageX,a=t.width(),o=parseInt(t.css("padding-left")),i=a+o;$(".workThumbnail").hasClass("expandedWorkFinish")&&b>k&&(o>n||n>i?t.addClass("cursor"):t.removeClass("cursor"))}).find(".thumbnailImageContainer").css({height:p+"px","padding-bottom":"0px"})}})}}))}function l(){clearInterval(A);for(var e=0;e<W.length;e++)clearTimeout(W[e]);W=[],F.animate({d:"M22,14c-7.485,0-14,8-14,8s6.515,8,14,8c7.484,0,14-8,14-8S29.484,14,22,14z"},100,mina.easein)}function u(){var e="M22,14c-7.485,0-14,8-14,8s6.515,8,14,8c7.484,0,14-8,14-8S29.484,14,22,14z",t="M22,22c-7.485,0-14,0-14,0S14.515,22,22,22c7.484,0,14,0,14,0S29.484,22,22,22z";F.animate({d:t},140,mina.easein),W.push(setTimeout(function(){F.animate({d:e},200,mina.easein)},250)),W.push(setTimeout(function(){F.animate({d:t},140,mina.easein)},1e3)),W.push(setTimeout(function(){F.animate({d:e},200,mina.easein)},1200)),W.push(setTimeout(function(){I.velocity({cx:"21",cy:"20"},{queue:!1,duration:200,easing:[.4,0,.2,1]})},1200)),W.push(setTimeout(function(){F.animate({d:t},140,mina.easein)},2400)),W.push(setTimeout(function(){F.animate({d:e},200,mina.easein)},2600)),W.push(setTimeout(function(){I.velocity({cx:"22",cy:"21"},{queue:!1,duration:200,easing:[.4,0,.2,1]})},2600))}function c(e,t,n){D=[e.toFixed(0),t.toFixed(0),n.toFixed(0)],"0"!==D[0]&&"0"!==D[1]&&"0"!==D[2]&&(Y=!0)}function d(e,t,n){if($(".workThumbnail").hasClass("expandedWorkFinish"))$(".gyroTop, .gyroBottom").removeAttr("style");else{Y===!1&&k>=b&&(c(event.alpha,event.beta,event.gamma),$(".workContainer").removeClass("noGyro"));var a=b/3;if($(".workPage").hasClass("activePage")){$(".gyroTop").css("transform","translateX("+(D[2]-n)*-.35+"px) translateY("+(D[1]-t)*-.35+"px) translateZ(0px)"),$(".gyroBottom").css("transform","translateX("+(D[2]-n)*-.2+"px) translateY("+(D[1]-t)*-.2+"px) translateZ(0px)");var o=(D[2]-n)*-.15-a,i=(D[1]-t)*-.15-a;$(".gyroBackground").css("background-position",o+"px "+i+"px")}}}function h(e){$("section").css("transform","translateX("+e+"%)")}function f(e){var n=e,s=e.index(),r=$("nav"),l=$(".workPage");k>=b&&n.hasClass("link")&&!n.hasClass("active")&&(n.addClass("clickedNav"),setTimeout(function(){n.removeClass("clickedNav")},800)),E.removeClass("active").eq(s).addClass("active"),e.hasClass("link")||t(E.eq(s)),0===X&&0===s&&$(".workThumbnail").hasClass("expandedWork")&&(i(),history.back()),$("section").removeClass("activePage").eq(s).addClass("activePage"),b>k&&(l.hasClass("activePage")?l.hasClass("activePage")&&r.hasClass("withBackground")&&o():a()),h("-"+s+"00"),X=s,$(".workThumbnail").hasClass("expandedWork")?(i(),history.back(),$(".workPage").removeClass("noScroll")):$(".journalEntry").hasClass("expandedEntry")&&(g(),history.back())}function p(){if(0===H&&$(".workPage").scrollTop()<$(window).height()/4){var e=$(".introText"),t=e.find("span.hide");t.velocity({width:[0]},{queue:!1,duration:450,easing:[.4,0,.2,1]}).velocity({opacity:[0,1]},{queue:!1,duration:225,easing:[.4,0,.2,1]}),e.find("span.l").addClass("noBackground"),e.find("span.jake").velocity({paddingRight:"3px",marginRight:"-3px"},{queue:!1,duration:450,easing:[.4,0,.2,1],complete:function(){e.find("span").addClass("animated")}}),H=1}}function m(e,t){$.ajax({url:t,success:function(t){var n=$("<div />").html(t).find(".journalEntryBodyInner");e.html(n)}})}function v(e,t,n){m(t,e),t.velocity({height:[x,0]},{queue:!1,duration:400,easing:[.23,1,.32,1],begin:function(){setTimeout(function(){n.addClass("expandedEntry")},100)},complete:function(){t.css({height:"auto"})}})}function g(){var e=$(".expandedEntry");e.find(".journalEntryBody").velocity({height:0},{queue:!1,duration:400,easing:[.23,1,.32,1],complete:function(){e.removeClass("expandedEntry")}})}function w(e,a){var o=e.split("?")[0],i=$(".workThumbnail a"),s=$(".journalEntry a"),l=null,u=null,c=o.split(".").pop();"html"!==c&&(o+=".html");for(var d=0;d<i.length;d++){var h=i.eq(d).attr("href");if(o===h){l=d;break}}if(null===l)for(var p=0;p<s.length;p++){var m=s.eq(p).attr("href");if("/journal/"+o===m){u=p;break}}if(null!==l)n(),$(".workThumbnail").eq(l).velocity("scroll",{offset:$(".workContainer").position().top,container:$(".workPage"),mobileHA:!1,duration:400,easing:[.23,1,.32,1],complete:function(){a===!0?setTimeout(function(){r($(".workThumbnail > a").eq(l)),console.log("openwork from popstate"),history.pushState(null,null,o)},400):(r($(".workThumbnail > a").eq(l-1)),console.log("openwork from popstate"))}});else if(null!==u){var g=$(".journalEntry").eq(u),w=$(".journalEntryBody").eq(u),y=$("nav ul li").eq(1);$("nav").velocity({translateY:"0px"},{queue:!1,duration:0,complete:function(){$("section").velocity({translateX:"-100%"},{queue:!1,duration:0}),t(y),f(y)}}).addClass("withBackground"),g.velocity("scroll",{container:$(".journalPage"),mobileHA:!1,duration:600,easing:[.23,1,.32,1]}),a===!0&&history.pushState(null,null,"/journal/"+o),v("/journal/"+o,w,g)}else if(null!==o||""!==o||" "!==o)return n(),console.log("404"),console.log(o),$(".popup404").addClass("show"),setTimeout(function(){$(".popup404").addClass("hide")},4e3),history.replaceState(null,null,"/"),!1}function y(){if(console.log("popstate"),$(".workThumbnail").hasClass("expandedWork"))i(),$(".workPage").removeClass("noScroll");else if($(".journalEntry").hasClass("expandedEntry"))g(),console.log("close journal"),$(".workPage").removeClass("noScroll");else{var e=window.location.pathname.split("/"),t=e[e.length-1];console.log(t),w(t,!1)}}var k=480,C=600,x=$(window).height(),b=$(window).width(),T=-1,q=-1,P=0,j=$(".aboutPage .containerInner, .workPage");$(window).resize(function(){x=$(window).height(),b=$(window).width()}),j.on("mousewheel",function(){e(),P=1,clearTimeout($.data(this,"timer")),$.data(this,"timer",setTimeout(function(){P=0},100))}).scroll(function(){return 1===P?!1:void e()});var E=$("nav li.link"),S=$("li.navIndicator");E.mouseenter(function(){t($(this))}).mouseleave(function(){t($("nav li.active"))}),$(document).on("click",".backToWorkContainer",function(){i(),history.back()}),$(".workThumbnail > a").click(function(e){e.stopPropagation(),e.preventDefault(),r($(this)),history.pushState(null,null,$(this).attr("href"))});var B=Snap(".eyecon"),F=B.selectAll("path"),I=$(".eye svg circle"),W=[],A=null;$(".eye").hover(function(){W.push(setTimeout(function(){u(),A=setInterval(function(){u()},3600)},600))}).mouseleave(function(){l()});var Y=!1,D=null;window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",function(e){e.preventDefault(),d(event.alpha.toFixed(1),event.beta.toFixed(1),event.gamma.toFixed(1))},!0);var X=0;$("nav li.link, nav .logo").click(function(){var e=$(this);f(e)});var H=0;$(".introText span").click(function(){p()}).mouseenter(function(){p()}),$(".journalEntry > a").click(function(e){if(e.preventDefault(),$(this).parent().hasClass("expandedEntry"))g(),history.back();else{var t=$(this).attr("href"),n=$(this).parent().index(),a=$(this).next(".journalEntryBody"),o=$(".journalEntry").eq(n);$(".journalEntry").hasClass("expandedEntry")?(g(),o.velocity("scroll",{container:$(".journalPage"),mobileHA:!1,duration:400,easing:[.23,1,.32,1],complete:function(){v(t,a,o),history.pushState(null,null,t)}})):(o.velocity("scroll",{container:$(".journalPage"),mobileHA:!1,duration:600,easing:[.23,1,.32,1]}),v(t,a,o),history.pushState(null,null,t))}}),$.get("https://api.dribbble.com/v1/users/Jakely?access_token=3d7fa1a3c4c6c792ffc2a77f21051c7fe3a6c873c4d39d40e80da4cc56dfc795",function(e){var t=48e4,n=e.shots_count*t,a=$(".pixelsDribbbled");a.text(n)}),$.ajax({url:"https://cdn.syndication.twimg.com/widgets/followbutton/info.json?screen_names=JakelyDesigns",dataType:"jsonp",success:function(e){var t=e[0].followers_count,n=$(".twitterFollowers");n.text(t)},fail:function(){$(".twitterFollowers").text("150")}}),$(window).load(function(){setTimeout(function(){var e="Jakeblakeley93",t="gmail.com";$(".emailText").text(e+"@"+t)},500)}),$("form input, form textarea").blur(function(){""===$(this).val()?$(this).removeClass("filled"):$(this).addClass("filled")}).on("keyup blur",function(){var e=$("form input"),t=$("form textarea"),n=$("form button");0!==$.trim(e.eq(0).val()).length&&0!==$.trim(e.eq(1).val()).length&&$.trim(t.val()).length>=10?n.removeClass("inactive"):n.addClass("inactive")}),$(".popup404 .close").click(function(){$(".popup404").addClass("hide")});var _=0;window.addEventListener("load",function(){setTimeout(function(){window.addEventListener("popstate",function(){y()})},500)});var z=window.location.search.slice(1);z.length>0?(history.replaceState(null,null,"/"),w(z,!0)):n()}),$(function(){function e(e,t){if("error"===e){o.find("li[id!='info']").remove();var n;for(n in t)o.append("<li>"+t[n]+"</li>");mailError()}else mailSuccess()}var t=$("form"),n=t.find('input[type!="submit"],textarea'),a=t.find("#submit-button"),o=$("#errors"),i=$("#loading"),s={required:" is a required field",email:"You have not entered a valid email address for the field: ",minlength:" must be greater than "};a.on("click",function(){var a=!0,o=[];return n.each(function(){var e=this.name,t=e.ucfirst(),n=this.value,i=this.getAttribute("type"),r=this.getAttribute("data-minlength");return this.validity&&!this.validity.valid?(a=!1,console.log(this.validity),this.validity.valueMissing?o.push(t+s.required):this.validity.typeMismatch&&"email"===i&&o.push(s.email+t),this.focus(),!1):r&&n.length<parseInt(r)?(this.focus(),a=!1,o.push(t+s.minlength+r+" charcters"),!1):void 0}),a?(i.show(),$.ajax({url:t.attr("action"),type:t.attr("method"),data:t.serialize(),success:function(){e("success"),t.get(0).reset(),i.hide()}})):e("error",o),!1}),String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.slice(1)}});